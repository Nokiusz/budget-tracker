<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title></title>
    <link href="C:\Users\nokiusz\Github\aplikacje-mobilne\node_modules\visualize-react-component\dist\viewer.css" rel="stylesheet" />
    <script>
    const diagram ={"vscode":true,"width":420,"height":320,"schema":{"nodes":[{"id":"index","coordinates":[20,20],"data":{"code":"import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './css/index.css';\nimport App from './App';\nimport { ContextProvider } from './context/Context';\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <ContextProvider>\n      <App />\n    </ContextProvider>\n  </React.StrictMode>\n);\n\n\n","title":"index","fileName":"C:\\Users\\nokiusz\\Github\\aplikacje-mobilne\\src\\index.js","loc":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}}}},{"id":"App","coordinates":[120,120],"data":{"code":"import { useContext, useEffect } from 'react';\nimport { Route, HashRouter as Router, Routes } from 'react-router-dom';\n\nimport { Nav } from './components/';\nimport Add from './pages/Add';\nimport Charts from './pages/Charts';\nimport Home from './pages/Home';\nimport Settings from './pages/Settings';\n\nimport './css/App.css';\n\nconst App = () => {\n\n  return (\n    <div className=\"App\">\n      <Router>\n        <Routes>\n          <Route path=\"/\" element={<Home />} />\n          <Route path=\"/charts\" element={<Charts />} />\n          <Route path=\"/add\" element={<Add />} />\n          <Route path=\"/settings\" element={<Settings />} />\n        </Routes>\n        <Nav />\n      </Router>\n\n\n    </div>\n  );\n}\n\nexport default App;\n","title":"App","fileName":"C:\\Users\\nokiusz\\Github\\aplikacje-mobilne\\src\\App.js","loc":{"start":{"line":12,"column":6},"end":{"line":12,"column":9}}}},{"id":"Nav","coordinates":[220,220],"data":{"code":"export { default as List } from './List';\r\nexport { default as ListItem } from './ListItem';\r\nexport { default as Header } from './Header';\r\nexport { default as Nav } from './Nav';","title":"Nav","fileName":"C:\\Users\\nokiusz\\Github\\aplikacje-mobilne\\src\\components/index.js","loc":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}}}},{"id":"ContextProvider","coordinates":[320,120],"data":{"code":"import { createContext, useEffect, useState } from 'react';\r\n\r\nexport const GlobalContext = createContext();\r\n\r\nexport const ContextProvider = ({ children }) => {\r\n    const [transactionsData, setTransactionsData] = useState([]);\r\n    const [incomeTotal, setIncomeTotal] = useState(0);\r\n    const [expenseTotal, setExpenseTotal] = useState(0);\r\n    const [showValues, setShowValues] = useState(true);\r\n    const [darkMode, setDarkMode] = useState(false);\r\n\r\n    const sumIncome = () => {\r\n        const income = transactionsData.filter(item => item.type === 'income');\r\n        setIncomeTotal(income.reduce((acc, item) => acc + item.value, 0));\r\n\r\n    }\r\n\r\n    const sumExpense = () => {\r\n        const expense = transactionsData.filter(item => item.type === 'expense');\r\n        setExpenseTotal(expense.reduce((acc, item) => acc + item.value, 0));\r\n    }\r\n\r\n    const BASE_URL = 'http://192.168.0.157:5000/api'\r\n\r\n    const fetchData = async () => {\r\n        const data = await fetch(`${BASE_URL}/transactions/list`);\r\n        const dataJson = await data.json();\r\n        setTransactionsData(dataJson.rows);\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (localStorage.getItem('showValues') === null) {\r\n            localStorage.setItem('showValues', true);\r\n        }\r\n        if (localStorage.getItem('darkMode') === null) {\r\n            localStorage.setItem('darkMode', false);\r\n        }\r\n        setShowValues(JSON.parse(localStorage.getItem('showValues')));\r\n        setDarkMode(JSON.parse(localStorage.getItem('darkMode')));\r\n\r\n    }, [])\r\n\r\n\r\n    useEffect(() => {\r\n        sumIncome();\r\n        sumExpense();\r\n    }, [transactionsData])\r\n\r\n\r\n    const providerValue = {\r\n        transactionsData,\r\n        setTransactionsData,\r\n        incomeTotal,\r\n        setIncomeTotal,\r\n        expenseTotal,\r\n        setExpenseTotal,\r\n        showValues,\r\n        setShowValues,\r\n        darkMode,\r\n        setDarkMode\r\n    };\r\n\r\n    return (\r\n        <GlobalContext.Provider value={providerValue}>\r\n            {children}\r\n        </GlobalContext.Provider>\r\n    );\r\n};","title":"ContextProvider","fileName":"C:\\Users\\nokiusz\\Github\\aplikacje-mobilne\\src\\context\\Context.js","loc":{"start":{"line":5,"column":13},"end":{"line":5,"column":28}}}}],"links":[{"input":"App-output","output":"Nav-input"},{"input":"index-output","output":"App-input"},{"input":"index-output","output":"ContextProvider-input"}]}}
    </script>
  </head>
  <body>
    <div id="root" />
    <script src="C:\Users\nokiusz\Github\aplikacje-mobilne\node_modules\visualize-react-component\dist\viewer.js"></script>
  </body>
</html>